<!DOCTYPE html>
<html>
<head>
  <title>MCP Ping Test</title>
  <style>
    body { 
      font-family: system-ui, -apple-system, sans-serif; 
      line-height: 1.4; 
      max-width: 800px; 
      margin: 0 auto; 
      padding: 20px; 
      background-color: #0f1015;
      color: #e5e7eb;
    }
    pre { 
      background: #1e1f26; 
      padding: 10px; 
      overflow: auto; 
      border-radius: 4px; 
    }
    code { font-family: monospace; }
    button { 
      cursor: pointer; 
      padding: 8px 16px; 
      background-color: #8a5cf6;
      color: #111;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      margin: 5px;
    }
    button:hover {
      background-color: #9672f7;
    }
    .test-section { 
      margin-top: 30px; 
      border-top: 1px solid #3f3f46; 
      padding-top: 20px; 
    }
    #response { 
      margin-top: 10px; 
      white-space: pre-wrap; 
      background: #1e1f26;
      padding: 15px;
      border-radius: 8px;
    }
    h1, h2, h3 { color: #8a5cf6; }
  </style>
</head>
<body>
  <h1>MCP Ping Test</h1>
  <p>
    This is a simple test client for the Model Context Protocol (MCP) ping endpoint.
  </p>

  <div class="test-section">
    <h2>Test MCP Ping</h2>
    <button onclick="testPing()">Ping</button>
    
    <div>
      <h3>Response:</h3>
      <pre id="response">Click the Ping button to test the MCP endpoint</pre>
    </div>
  </div>

  <div class="test-section">
    <h2>Test Invalid Method</h2>
    <button onclick="testInvalidMethod()">Send Invalid Method</button>
  </div>

  <script>
    // Function to test MCP ping
    async function testPing() {
      const response = document.getElementById('response');
      response.textContent = 'Loading...';
      
      try {
        const res = await fetch('/api/mcp', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            jsonrpc: '2.0',
            method: 'ping',
            id: Date.now()
          })
        });
        
        const data = await res.json();
        response.textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        response.textContent = 'Error: ' + err.message;
      }
    }

    // Function to test invalid method
    async function testInvalidMethod() {
      const response = document.getElementById('response');
      response.textContent = 'Loading...';
      
      try {
        const res = await fetch('/api/mcp', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            jsonrpc: '2.0',
            method: 'nonexistent_method',
            id: Date.now()
          })
        });
        
        const data = await res.json();
        response.textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        response.textContent = 'Error: ' + err.message;
      }
    }
  </script>
</body>
</html>